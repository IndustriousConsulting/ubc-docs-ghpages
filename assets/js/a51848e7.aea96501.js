"use strict";(self.webpackChunkubc_services=self.webpackChunkubc_services||[]).push([[1622],{162:(e,n,i)=>{i.d(n,{A:()=>s});const s=i.p+"assets/images/image_005-e3ffcfd1f44c720a3d81ef42f8951ebf.png"},176:(e,n,i)=>{i.d(n,{A:()=>s});const s=i.p+"assets/images/image_014-a72b8e3f3f1080c32616d944ec85cefd.png"},627:(e,n,i)=>{i.d(n,{A:()=>s});const s=i.p+"assets/images/image_007-16e8f97f4d8adfd35d92fc29957f02fb.png"},921:(e,n,i)=>{i.d(n,{A:()=>s});const s=i.p+"assets/images/image_020-53d82e142af6747be9f89710aa9cefe3.png"},1046:(e,n,i)=>{i.d(n,{A:()=>s});const s=i.p+"assets/images/image_001-ccf7415b0adb9a2d7bc6719ed8e948bb.png"},1071:(e,n,i)=>{i.d(n,{A:()=>s});const s=i.p+"assets/images/image_026-f712f33aa680ed29af1862024ce54dce.png"},1124:(e,n,i)=>{i.d(n,{A:()=>s});const s=i.p+"assets/images/image_003-5f3c2b7b42cd452b72e1c84843d39e00.png"},1129:(e,n,i)=>{i.d(n,{A:()=>s});const s=i.p+"assets/images/image_006-bd2525015f0aedabf10ca8014597564f.png"},1339:(e,n,i)=>{i.d(n,{A:()=>s});const s=i.p+"assets/images/image_004-d390dcb2dad1e598c608353c15f3bc39.png"},1477:(e,n,i)=>{i.d(n,{A:()=>s});const s=i.p+"assets/images/image_023-58f43c011543d5dec0c612d881b307c3.png"},2604:(e,n,i)=>{i.d(n,{A:()=>s});const s=i.p+"assets/images/image_018-ef688dbfcdc60a379f87606b24158d9b.png"},3490:(e,n,i)=>{i.d(n,{A:()=>s});const s=i.p+"assets/images/image_016-bc0ef91cb7cbccfe67b0a462b5feb439.png"},3995:(e,n,i)=>{i.d(n,{A:()=>s});const s=i.p+"assets/images/image_017-7a6ccd2557849a69fa3dde8594477801.png"},4084:(e,n,i)=>{i.d(n,{A:()=>s});const s=i.p+"assets/images/image_010-ee444316c3713a3c328a7cd2f1a02c61.png"},4103:(e,n,i)=>{i.d(n,{A:()=>s});const s=i.p+"assets/images/image_008-852159c1f9c21f1dd7fa0d32a31c5953.png"},5021:(e,n,i)=>{i.d(n,{A:()=>s});const s=i.p+"assets/images/image_002-734ed56272433068dce98269e6c86818.png"},5213:(e,n,i)=>{i.d(n,{A:()=>s});const s=i.p+"assets/images/image_011-efbfeb20340f96f5e5fb2b9b294ab4ef.png"},6365:(e,n,i)=>{i.d(n,{A:()=>s});const s=i.p+"assets/images/image_024-80c4e6af53c2fc07ab2969f9dd013228.png"},6420:(e,n,i)=>{i.d(n,{A:()=>s});const s=i.p+"assets/images/image_025-0482f1002231aace1a501c22226f9caf.png"},6425:(e,n,i)=>{i.d(n,{A:()=>s});const s=i.p+"assets/images/image_015-29fc595aad6411a59f769d7988a2bba1.png"},6753:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"IO/documentation","title":"I/O Monitoring (UBC.io)","description":"Intro","source":"@site/docs/IO/documentation.md","sourceDirName":"IO","slug":"/IO/documentation","permalink":"/IO/documentation","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"ubcSidebar","previous":{"title":"Overview","permalink":"/"},"next":{"title":"RESTful webservices (UBC.rest)","permalink":"/REST/documentation"}}');var t=i(4848),a=i(8453);const o={},r="I/O Monitoring (UBC.io)",l={},c=[{value:"Intro",id:"intro",level:2},{value:"Monitoring and error handling",id:"monitoring-and-error-handling",level:2},{value:"I/O detail monitor <code>/UBC/IO</code>",id:"io-detail-monitor-ubcio",level:3},{value:"Message status",id:"message-status",level:3},{value:"Processing options (Queue type)",id:"processing-options-queue-type",level:3},{value:"Synchronous processing",id:"synchronous-processing",level:4},{value:"Asynchronous processing",id:"asynchronous-processing",level:4},{value:"No queue (transactional)",id:"no-queue-transactional",level:5},{value:"Automatic processing",id:"automatic-processing",level:6},{value:"Manual processing",id:"manual-processing",level:6},{value:"Queue (all asychronous processing)",id:"queue-all-asychronous-processing",level:5},{value:"By creation timestamp",id:"by-creation-timestamp",level:6},{value:"By message payload index",id:"by-message-payload-index",level:6},{value:"Queue monitor <code>/UBC/IO_QUEUE</code>",id:"queue-monitor-ubcio_queue",level:3},{value:"Development",id:"development",level:2},{value:"Customizing",id:"customizing",level:3},{value:"Interfaces",id:"interfaces",level:4},{value:"Assign technical interfaces to UBC.io interface",id:"assign-technical-interfaces-to-ubcio-interface",level:5},{value:"Field mapping",id:"field-mapping",level:6},{value:"Multi steps (LUWs)",id:"multi-steps-luws",level:6},{value:"Multi Index tables",id:"multi-index-tables",level:6},{value:"Queue keys",id:"queue-keys",level:5},{value:"Auto Restart",id:"auto-restart",level:4},{value:"Workflow Integration",id:"workflow-integration",level:4},{value:"Example implementation",id:"example-implementation",level:5},{value:"Implementation",id:"implementation",level:3},{value:"Triggering Interfaces (Top Level Function Module only)",id:"triggering-interfaces-top-level-function-module-only",level:4},{value:"Multi Step Interfaces",id:"multi-step-interfaces",level:4},{value:"Templates",id:"templates",level:4},{value:"Business Add-Ins (BADIs)",id:"business-add-ins-badis",level:4},{value:"Interface determination with <code>/C09/BADI_CIO_FUNC</code>",id:"interface-determination-with-c09badi_cio_func",level:5},{value:"Add dynamic selection fields with <code>/C09/BADI_CIO_DATA</code>",id:"add-dynamic-selection-fields-with-c09badi_cio_data",level:5},{value:"System setup",id:"system-setup",level:2},{value:"bgRFC configuration",id:"bgrfc-configuration",level:3},{value:"Auto restart Job",id:"auto-restart-job",level:3},{value:"Authorization",id:"authorization",level:2},{value:"Data Archiving",id:"data-archiving",level:2}];function d(e){const n={a:"a",admonition:"admonition",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"io-monitoring-ubcio",children:"I/O Monitoring (UBC.io)"})}),"\n",(0,t.jsx)(n.h2,{id:"intro",children:"Intro"}),"\n",(0,t.jsx)(n.p,{children:"UBC - Unified Backend Connector comes with a component for I/O monitoring/processing, which is a tool and framework for comprehensive interface\xa0monitoring from and into the SAP system\u200b - single entry point!\nA few key facts:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Monitoring, restarting, editing of various messages\xa0without environment system involvement clearly\xa0arranged in the cockpit\u200b"}),"\n",(0,t.jsx)(n.li,{children:"Logging of changes and runs"}),"\n",(0,t.jsx)(n.li,{children:"Auto restart"}),"\n",(0,t.jsx)(n.li,{children:"Logical chaining of processes via queueing\u200b"}),"\n",(0,t.jsx)(n.li,{children:"Structured message search and display"}),"\n",(0,t.jsx)(n.li,{children:"Alerting \u2013 workflow integration"}),"\n",(0,t.jsx)(n.li,{children:"Easy to integrate: Pre-delivered templates"}),"\n",(0,t.jsx)(n.li,{children:"No additional licenses needed\u200b - integrated into the on-premise system"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Overview",src:i(1339).A+"",width:"720",height:"405"})}),"\n",(0,t.jsx)(n.h2,{id:"monitoring-and-error-handling",children:"Monitoring and error handling"}),"\n",(0,t.jsx)(n.p,{children:'Basically there are 2 Monitoring and error handling transactions for getting an holistic overview of all the messages within the system.\nUBC.io is organized by "interfaces", which are basically a grouping of one to many technical interfaces to a "logical" unit (e.g. all MES interfaces related to a production order). Each interface can have attributes which are mapped from the message payload to an index table for a structured search and overview in a result list.'}),"\n",(0,t.jsxs)(n.h3,{id:"io-detail-monitor-ubcio",children:["I/O detail monitor ",(0,t.jsx)(n.code,{children:"/UBC/IO"})]}),"\n",(0,t.jsxs)(n.p,{children:["This transaction is for a structure search for chosen payload attributes, for detailed analysis and for all error handling tasks.\nFirst you choose one or many interfaces to select for messages and further restrict the selection screen (which is an intersection of all available ",(0,t.jsx)(n.a,{href:"#index-tables",children:"indexed fields"})," and eventually ",(0,t.jsx)(n.a,{href:"#multi-index-tables",children:"Multi index fields"}),").\nYou can select e.g.:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"for messages of material 4711 which were sent today"}),"\n",(0,t.jsx)(n.li,{children:"for messages in an error state"}),"\n",(0,t.jsx)(n.li,{children:"..."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Selection screen",src:i(162).A+"",width:"612",height:"438"})}),"\n",(0,t.jsxs)(n.p,{children:["By hitting Execute(F8) the result list will be displayed. As in the selection screen, it is the intersection of all available ",(0,t.jsx)(n.a,{href:"#index-tables",children:"indexed fields"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["Depending on the interface ",(0,t.jsx)(n.a,{href:"#processing-options-queue-type",children:"processing mode"})," (asynchronous/synchronous) following options are available:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["editing messages (asynchronous only)\nBasically the message will be copied, the old message will be set to status ",(0,t.jsx)(n.code,{children:"OBS"})," and the new message will be processed, depending on the ",(0,t.jsx)(n.a,{href:"#processing-options-queue-type",children:"processing type"})]}),"\n",(0,t.jsxs)(n.li,{children:["restarting of messages in an error state (asynchronous only)","\n",(0,t.jsxs)(n.admonition,{type:"tip",children:[(0,t.jsx)(n.p,{children:"If the User which triggers the Restart is different from the User which initially triggered the message, the following applies:"}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"the initial user processes the transaction (as the bgRFC unit remains)"}),"\n",(0,t.jsx)(n.li,{children:'the admin data for the message shows the user which restarted the message as "last changed by"'}),"\n",(0,t.jsx)(n.li,{children:"in the log you will see, which user processed the transaction. This log message is only shown, if the users (Restart vs. Processing) are different."}),"\n"]})]}),"\n"]}),"\n",(0,t.jsx)(n.li,{children:"acknowledgment of messages in an error state (asynchronous only)"}),"\n",(0,t.jsx)(n.li,{children:"copying messages for testing"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["(Actions are available for multi selection)\n",(0,t.jsx)(n.img,{alt:"Selection screen",src:i(1129).A+"",width:"744",height:"352"}),(0,t.jsx)(n.br,{}),"\n","The screen has basically 4 areas:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"result list (top left) with alle the indexed fields, actions, ...\nClick on the message number to select a message and view the details. Selecting a message shows the other parts of the screen."}),"\n",(0,t.jsx)(n.li,{children:"application log (top right)\nProcessing log of a message including all the actions happened."}),"\n",(0,t.jsx)(n.li,{children:'Runs (bottom left)\nShowing all the runs of a message. Basically a "Restart" starts a new run.'}),"\n",(0,t.jsx)(n.li,{children:"Message payload (bottom right)\nGrid display of all the contents of the message including the options to view and download as JSON"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"message-status",children:"Message status"}),"\n",(0,t.jsx)(n.p,{children:"The following is a list of all possible status a message can have:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"ERROR"})," The message is in an error state and waits for action (restart, acknowledgment)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"ACK"})," A message in status ",(0,t.jsx)(n.code,{children:"ERROR"})," was acknowledged."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"SUCC"})," The message was successfully processed, without any errors."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"OBS"})," The message was edited. The old message was saved in status ",(0,t.jsx)(n.code,{children:"OBS"})," for research reasons. The new message points to the old message."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"COPY"})," The message was copied and is ready for processing."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"QUEUE"})," The message was saved and waits for processing, which will start as soon as system resources are available or if a predecessor exists, the predecessor was processed successfully/acknowledged."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"PEND"})," The message is currently processing."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"READY"}),' The message is ready for being processed, but needs a confirmation by a user which needs to release it by selecting "Restart" in the monitor (only for processing type ',(0,t.jsx)(n.a,{href:"#manual-processing",children:"Manual processing"}),")"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"processing-options-queue-type",children:"Processing options (Queue type)"}),"\n",(0,t.jsx)(n.p,{children:"Both asynchronous or synchronous processing of messages is available."}),"\n",(0,t.jsx)(n.h4,{id:"synchronous-processing",children:"Synchronous processing"}),"\n",(0,t.jsx)(n.p,{children:"The message will be processed synchronously. It's just like any other function module call and behaves the same, the caller does not need to consider anything special. Synchronous processing is usually chosen for logging reasons only, restart of such a message does not make much sense and is not possible! If needed for troubleshooting/debugging reasons, copy the message."}),"\n",(0,t.jsx)(n.h4,{id:"asynchronous-processing",children:"Asynchronous processing"}),"\n",(0,t.jsx)(n.h5,{id:"no-queue-transactional",children:"No queue (transactional)"}),"\n",(0,t.jsx)(n.p,{children:"Messages will be processed in arbitrary order. Choose one of the options below if the messages does not belong to each other."}),"\n",(0,t.jsx)(n.h6,{id:"automatic-processing",children:"Automatic processing"}),"\n",(0,t.jsx)(n.p,{children:"Processing of the message starts immediatly just right after resources are available asynchronously."}),"\n",(0,t.jsx)(n.h6,{id:"manual-processing",children:"Manual processing"}),"\n",(0,t.jsxs)(n.p,{children:["New messages saved in status ",(0,t.jsx)(n.code,{children:"READY"}),". The processing of the messages have to be triggered by going to the I/O monitoring transaction ",(0,t.jsx)(n.code,{children:"/UBC/IO"})," and restarting a message in status ",(0,t.jsx)(n.code,{children:"READY"}),". The processing of the message starts then immediatly just right after resources are available asynchronously."]}),"\n",(0,t.jsx)(n.h5,{id:"queue-all-asychronous-processing",children:"Queue (all asychronous processing)"}),"\n",(0,t.jsxs)(n.p,{children:["Messages will be processed in a well defined order. Choose one of the options below if the messages are in any relation to each other within a Queue. The Sequence is important!\nIf the first message in a queue gets stuck by an error, the queue gets blocked. The following entries will ",(0,t.jsx)(n.strong,{children:"not"})," be processed until the error of the first message gets resolved (by acknowledge or restart).\nThe Queue key can be freely defined (up to 40 characters in total) by concatenating either parts of the index table (which was mapped out of the message payload) or literals (to further distinguish).\nFor example, messages contains a material needs to be posted in a defined order to prevent locking and errors. The following configuration constructs a key like ",(0,t.jsx)(n.code,{children:"MATERIAL_<<matnr>>"}),". Best practice: use literals first to distinguish the type of object to queue for (in this example: ",(0,t.jsx)(n.code,{children:"MATERIAL"}),"). The queue key is globally valid across your interfaces.\n",(0,t.jsx)(n.img,{alt:"Queue key configuration",src:i(1046).A+"",width:"1139",height:"404"})]}),"\n",(0,t.jsx)(n.admonition,{type:"warning",children:(0,t.jsxs)(n.p,{children:["Every queue key have to match to a prefix configured in your target bgRFC destination. See below in section ",(0,t.jsx)(n.a,{href:"#bgrfc-configuration",children:"bgRFC configuration"})]})}),"\n",(0,t.jsx)(n.h6,{id:"by-creation-timestamp",children:"By creation timestamp"}),"\n",(0,t.jsx)(n.p,{children:"The entries within a Queue are ordered by Creation Timestamp (UTC Long) of the message. First in - First out!"}),"\n",(0,t.jsx)(n.h6,{id:"by-message-payload-index",children:"By message payload index"}),"\n",(0,t.jsx)(n.p,{children:"You need to additionally specify a field of your index table where the external Index is located - mapped from the message payload. An external index is a Integer Number starting with 1 without any gaps. The external index is determined by the sender system and sent within the message payload. This technique is needed for example, if you have a strict processing order, but a middleware in place and you cannot ensure that messages which need to be processed first are also sent first.\nThen your sender system needs to generate the external index starting with 1.\nLet's construct an example:"}),"\n",(0,t.jsx)(n.p,{children:"5 Messages will be sent in arbitrary order, all allocated to the same queue:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Message with Index 1"}),"\n",(0,t.jsx)(n.li,{children:"Message with Index 3"}),"\n",(0,t.jsx)(n.li,{children:"Message with Index 2"}),"\n",(0,t.jsx)(n.li,{children:"Message with Index 5"}),"\n",(0,t.jsx)(n.li,{children:"Message with Index 4"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Using external Index ensures to process the Messages in a correct order:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Message with Index 1"}),"\n",(0,t.jsx)(n.li,{children:"Message with Index 2"}),"\n",(0,t.jsx)(n.li,{children:"Message with Index 3"}),"\n",(0,t.jsx)(n.li,{children:"Message with Index 4"}),"\n",(0,t.jsx)(n.li,{children:"Message with Index 5"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"The processing of the next message in a queue waits until it was written to the queue and unlocks the processing."}),"\n",(0,t.jsxs)(n.h3,{id:"queue-monitor-ubcio_queue",children:["Queue monitor ",(0,t.jsx)(n.code,{children:"/UBC/IO_QUEUE"})]}),"\n",(0,t.jsxs)(n.p,{children:['This transaction basically is an overview of all messages which are currently organized by a Queue. You can see the reasons why messages are waiting (predecessors) and of course details. You can jump to the monitor by selecting the messages and click on "monitor".',(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.img,{alt:"Queue monitor",src:i(627).A+"",width:"526",height:"451"})]}),"\n",(0,t.jsx)(n.h2,{id:"development",children:"Development"}),"\n",(0,t.jsx)(n.p,{children:"This step contains all the information needed for developing an new interface, from Customizing to development."}),"\n",(0,t.jsx)(n.h3,{id:"customizing",children:"Customizing"}),"\n",(0,t.jsx)(n.h4,{id:"interfaces",children:"Interfaces"}),"\n",(0,t.jsxs)(n.p,{children:["Start with transaction ",(0,t.jsx)(n.code,{children:"/UBC/IO_C"})," with defining new interfaces.\n",(0,t.jsx)(n.img,{alt:"Interface definition",src:i(4103).A+"",width:"1185",height:"427"})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Interface name and description\nAs mentioned, UBC.io is organized by interfaces where many technical interfaces referring to the same (e.g. MES interfaces to a production order) are grouped logically.\nInterface name is unique, description can be translated."}),"\n",(0,t.jsxs)(n.li,{children:['Index table\nAn index table is intended to hold adminstrative data for a message like "status", "creation data", ...\nIt\'s an customer created table with a fixed signature (see ',(0,t.jsx)(n.a,{href:"#templates",children:"templates"}),') enabling to add custom fields in a dedicated include and map message payload data to an index table. In the generic monitoring transactions, you are enabled to search/filter for all the fields in an index table.\nFurthermore you can define "Jumps" to transactions using custom logic in ',(0,t.jsx)(n.a,{href:"#business-add-ins-badis",children:"BADIs"}),".\nIf no index table is specified, a default index table is used."]}),"\n",(0,t.jsxs)(n.li,{children:["Queue type (see ",(0,t.jsx)(n.a,{href:"#processing-options-queue-type",children:"Processing options"}),")"]}),"\n",(0,t.jsxs)(n.li,{children:["bgRFC destination\nIf the chosen queue type is asynchronous, you have to define a valid bgRFC inbound destination where the entries for an interface will be processed. (see ",(0,t.jsx)(n.a,{href:"#bgrfc-configuration",children:"system setup"}),")"]}),"\n",(0,t.jsxs)(n.li,{children:["Message Index\nIf the chosen queue type is ",(0,t.jsx)(n.code,{children:"Message payload index"})," you have to specify the name of the field in your index table where the external index is stored to queue for."]}),"\n",(0,t.jsxs)(n.li,{children:["Mapping class (optional)\nThe given mapping class can override the standard behavior, which basically applies the customizing ",(0,t.jsx)(n.a,{href:"#field-mapping",children:"field mapping"}),". The mapping class has to implement the interface ",(0,t.jsx)(n.code,{children:"/C09/IF_CIO_MAP_IDX_SINGLE"}),". For implementation examples, see default implementation ",(0,t.jsx)(n.code,{children:"/C09/CL_CIO_MAP_IDX_SINGLE"}),". If the field is empty, the default implementation takes place, applying the customizing. Overriding this behavior makes sense when there is some complex calculation logic which cannot be defined by customizing."]}),"\n",(0,t.jsxs)(n.li,{children:["Function class (optional)\nI/O monitoring implementation, inheriting from /C09/CL_CIO_LIST to override some default behaviour if needed.\nIf not specified, the default implementation takes place. Not needed in most of the cases. Prefer using ",(0,t.jsx)(n.a,{href:"#business-add-ins-badis",children:"BADIs"})," if possible."]}),"\n"]}),"\n",(0,t.jsx)(n.h5,{id:"assign-technical-interfaces-to-ubcio-interface",children:"Assign technical interfaces to UBC.io interface"}),"\n",(0,t.jsxs)(n.p,{children:["Currently, only function modules are supported for technical interfaces managed by UBC.io to keep the complexity low. Most of the requirements can be fulfilled using this approach. This is subject to change and may be enhanced if needed. Please get in touch with us!\nSpecify a function module name as a top level entry for the assignment to an interface. Please note that the function module has to embed to simple calls at the begin and end to be ready for usage within UBC.io (see also ",(0,t.jsx)(n.a,{href:"#triggering-interfaces",children:"Implementation"}),")."]}),"\n",(0,t.jsx)(n.h6,{id:"field-mapping",children:"Field mapping"}),"\n",(0,t.jsx)(n.p,{children:"The field mapping is for basically 2 purposes:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"mapping of message payload to index table fields\nFor searching/indexing/overview reasons"}),"\n",(0,t.jsxs)(n.li,{children:["specify where the functional messages are located to map to the application log of a message.\nThis step is important in order to determine wether a message was erroneous or not (containing message of type E/A/X)\n",(0,t.jsx)(n.img,{alt:"Field mapping",src:i(4084).A+"",width:"1302",height:"402"})]}),"\n",(0,t.jsx)(n.li,{children:"Order\nMapping order, just increment in customizing."}),"\n",(0,t.jsxs)(n.li,{children:["Field path",(0,t.jsx)(n.br,{}),"\n","Mapping path to specific field in payload:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"deeply navigating: structures/tables separated by -"}),"\n",(0,t.jsx)(n.li,{children:"use search help (F4) for navigating within your payload (if type is known statically)"}),"\n",(0,t.jsxs)(n.li,{children:["supports ",(0,t.jsx)(n.code,{children:"[]"})," for tables","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"access specific index by just specifying the index, e.g. [1]"}),"\n",(0,t.jsxs)(n.li,{children:["access by specific fields in table (only supporting ",(0,t.jsx)(n.code,{children:"AND"})," condition), e.g. ",(0,t.jsx)(n.code,{children:"[fieldA=ABC and fieldB='']"})]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["supports substring functionality for elements, e.g. ",(0,t.jsx)(n.code,{children:"fieldA+1(1)"})," (Offset 1, Length 1 of content in fieldA)"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Fieldname table",(0,t.jsx)(n.br,{}),"\n","Fieldname in index table, custom include.\nHave to be empty, if messages are mapped."]}),"\n",(0,t.jsxs)(n.li,{children:["contains messages",(0,t.jsx)(n.br,{}),"\n","Tick if specifying messages entry for mapping to application log."]}),"\n",(0,t.jsxs)(n.li,{children:["optional",(0,t.jsx)(n.br,{}),"\n","As per default, all mappings which cannot be successfully executed (missing table entry, ...) results in an error (writing to application log, message in status ",(0,t.jsx)(n.code,{children:"ERROR"}),").\nTick this checkbox to simply leave the target empty."]}),"\n"]}),"\n",(0,t.jsx)(n.h6,{id:"multi-steps-luws",children:"Multi steps (LUWs)"}),"\n",(0,t.jsxs)(n.p,{children:['An inbound interface can have more than one LUW. For example when dealing with multiple Goods Movements in one interface, you have to commit each goods movement.\nIn order to be restart-able a interface has to consist only of one LUW. (commit or not)\nTo fulfill the above mentioned requirement you can configure "multi steps" interfaces to support more than one LUW, controlled by a single interface (and a top level function module). Please see implementation details, ',(0,t.jsx)(n.a,{href:"#multi-step-interfaces",children:"Multi Step Interfaces"}),".\n",(0,t.jsx)(n.img,{alt:"Multi steps Customizing",src:i(5213).A+"",width:"1226",height:"408"}),(0,t.jsx)(n.br,{}),"\n","In this scenario your top level function module, entered in section ",(0,t.jsx)(n.a,{href:"#assign-technical-interfaces-to-ubcio-interface",children:"Assign technical interfaces to UBC.io interface"}),", is just acting as a wrapper and/or session initialization module.\nEach time the message starts processing, first the top level module will be executed and then continued with the step which failed."]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Step Number",(0,t.jsx)(n.br,{}),"\n","Key of the table + the defined execution order of the steps.\nThe execution order is:","\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Top Level function module once at the beginning of a Run"}),"\n",(0,t.jsx)(n.li,{children:"Beginning where the execution last stopped due to an error OR at the begin\nFor every step configured, sorted by order."}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.li,{children:"Function Module name"}),"\n",(0,t.jsxs)(n.li,{children:["Commit mode",(0,t.jsx)(n.br,{}),"\n","As no function module should ever contain a ",(0,t.jsx)(n.code,{children:"COMMIT WORK"})," or ",(0,t.jsx)(n.code,{children:"ROLLBACK WORK"}),", specify the commit mode after each step."]}),"\n",(0,t.jsxs)(n.li,{children:["Continue on Error",(0,t.jsx)(n.br,{}),"\n","Ignore errors in function module, complete step and continue with execution."]}),"\n",(0,t.jsxs)(n.li,{children:["Restart always",(0,t.jsx)(n.br,{}),"\n",'If a step 10 was completed and 20 fails, on restart step 10 will not be executed again. Except the case that step 10 was marked as "restart always".']}),"\n"]}),"\n",(0,t.jsx)(n.h6,{id:"multi-index-tables",children:"Multi Index tables"}),"\n",(0,t.jsx)(n.p,{children:"Sometimes there are more complex use cases where you would like to search for field values in a table. Imagine having a payload like:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "order_header": {\n    "incoterm": "abc",\n    "shipTo": 4711\n  },\n  "order_items": [\n    {\n      "material": "123",\n      "plant": "0001"\n    },\n    {\n      "material": "456",\n      "plant": "0002"\n    },\n    {\n      "material": "789",\n      "plant": "0003"\n    }\n  ]\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:['You may want to search for messages regarding material "456". As "order_items" is a table, it cannot be mapped to a flat single index table for searching.',(0,t.jsx)(n.br,{}),"\n",'This is where "Multi Index tables" comes in.\n',(0,t.jsx)(n.img,{alt:"Multi Index table header",src:i(6425).A+"",width:"1341",height:"423"})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Multi Index table",(0,t.jsx)(n.br,{}),"\n","A Multi Index table is intended to have an entry for every line in the specified table\nIt's an customer created table with a fixed signature, see ",(0,t.jsx)(n.a,{href:"#templates",children:"templates"}),": especially copy table ",(0,t.jsx)(n.code,{children:"/UBC/IO_TTPLMIDX"})," and replace the fields ",(0,t.jsx)(n.code,{children:"matnr"})," and ",(0,t.jsx)(n.code,{children:"charge"})," with your custom ones.",(0,t.jsx)(n.br,{}),"\n","In the generic monitoring transactions, you are enabled to search for all the fields in the multi index table out-of-the-box. Please note that this only applies for the selection screen, as for the result list this does not really make sense.","\n",(0,t.jsx)(n.admonition,{type:"warning",children:(0,t.jsx)(n.p,{children:'As the Multi Index and Single Index tables are different ones, the results are technically combined with "logical AND". If one entry in the list of "multi index entries" is matching, the message is considered as a match.'})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Base path",(0,t.jsx)(n.br,{}),"\n","Specify a tabular component withing your actual payload structure. The standard implementation ",(0,t.jsx)(n.strong,{children:"currently"})," only supports tables, not tables in tables.",(0,t.jsx)(n.br,{}),"\n","You are free to use expressions like ",(0,t.jsx)(n.code,{children:"item[1]-schedules"}),", but ",(0,t.jsx)(n.code,{children:"items-schedules"})," is not supported. The last component needs to be a table to considered for the multi index set."]}),"\n",(0,t.jsxs)(n.li,{children:["Mapping class (optional)",(0,t.jsx)(n.br,{}),"\n","The given mapping class can override the standard behavior, which basically applies the customizing for the field mapping in the level below. The mapping class has to implement the interface ",(0,t.jsx)(n.code,{children:"/C09/IF_CIO_MAP_IDX_MULTI"}),". For implementation examples, see default implementation ",(0,t.jsx)(n.code,{children:"/C09/CL_CIO_MAP_IDX_MULTI"}),". If the field is empty, the default implementation takes place, applying the customizing. Overriding this behavior makes sense when there is some complex calculation logic which cannot be defined by customizing."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"field mapping"}),(0,t.jsx)(n.br,{}),"\n","For details please see section ",(0,t.jsx)(n.a,{href:"#field-mapping",children:"field mapping"}),".",(0,t.jsx)(n.br,{}),"\n","The same applies also here, with the following additions/restrictions:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["the base path (see above) will get respected, so you will have only elements available for the standard mapping contained in the specified table.\n",(0,t.jsx)(n.img,{alt:"field mapping multi index",src:i(3490).A+"",width:"1449",height:"895"}),(0,t.jsx)(n.br,{}),"\n","(in this example: only elements contained in ",(0,t.jsx)(n.code,{children:"IT_ITEM"})," specified above, you are free to apply the well known mapping syntax also here)"]}),"\n",(0,t.jsx)(n.li,{children:"no message mapping to application log in standard"}),"\n",(0,t.jsx)(n.li,{children:"all mappings are optional, not throwing any error"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Coming back to our initial example, that means we have 4 index table entries in general."}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"1 for the message itself in the single index table."}),"\n",(0,t.jsx)(n.li,{children:"3 entries in the Multi Index table"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["The generic ",(0,t.jsx)(n.a,{href:"#io-detail-monitor-ubcio",children:"I/O monitor"})," respects the Multi Index entries and adds the fields to the selection screen too."]}),"\n",(0,t.jsx)(n.h5,{id:"queue-keys",children:"Queue keys"}),"\n",(0,t.jsxs)(n.p,{children:["Mapping from Index Table Fields and/or Literals to Queue keys.\nPlease consider the following best practice to avoid queue name conflicts: as a queue prefix, always start with the type the queue key stands for.\nFor example:\n",(0,t.jsx)(n.img,{alt:"Queue Key Example for Material",src:i(1046).A+"",width:"1139",height:"404"}),(0,t.jsx)(n.br,{}),"\n","You can see that the Queue starts with the literal ",(0,t.jsx)(n.code,{children:"MATERIAL_"})," and then adds the material number. A Queue example would be ",(0,t.jsx)(n.code,{children:"MATERIAL_4711"}),".\nBy default, an alpha conversion is applied to a field value.\nThe queue key will be concatenated according to the given sequence. You are free to add as much fields and literals to your queue key as needed. Just consider the limit of 40 characters in total."]}),"\n",(0,t.jsx)(n.h4,{id:"auto-restart",children:"Auto Restart"}),"\n",(0,t.jsxs)(n.p,{children:["First, define a Auto Restart group in View Cluster Entry ",(0,t.jsx)(n.code,{children:"restart groups"}),'. It is for defining the "maximum runs" and wait time between a run.',(0,t.jsx)(n.br,{}),"\n",'You have to assign specific combinations of "T100" Message-Id and -Number. As soon as the error of an interface contains a message configured in its Auto Restart group, it will be considered. If an error message is not configured withing the restart group, it will not be considered.',(0,t.jsx)(n.br,{}),"\n","The following applies for the Message Keys:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["for Message Number, make sure to specify the full key with leading zeros (",(0,t.jsx)(n.code,{children:"001"})," and not ",(0,t.jsx)(n.code,{children:"1"}),")"]}),"\n",(0,t.jsxs)(n.li,{children:["you are allowed to use patterns like ",(0,t.jsx)(n.code,{children:"*"})," and ",(0,t.jsx)(n.code,{children:"+"})," for Message Class and Number"]}),"\n",(0,t.jsxs)(n.li,{children:["if you leave a field (Message Class or Number) empty, it acts like a ",(0,t.jsx)(n.code,{children:"*"})," wildcard for those field"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:['For example, you will define the "T100" Message Combination for "Message is locked" and define that the restart can be tried again in 5 minutes for 3 times.',(0,t.jsx)(n.br,{}),"\n","If the material than is locked again, the Message won't be auto restarted again."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.img,{alt:"Auto Restart Group",src:i(9199).A+"",width:"1148",height:"401"}),(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.img,{alt:"Assignment of Messages",src:i(176).A+"",width:"1201",height:"406"}),(0,t.jsx)(n.br,{}),"\n","Finally the Auto Restart Group needs to be assigned to an Interface Function assignment on level ",(0,t.jsx)(n.code,{children:"functions"})," in view cluster."]}),"\n",(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsxs)(n.p,{children:["Auto restart only makes sense for ",(0,t.jsx)(n.a,{href:"#asynchronous-processing",children:"asynchronous interfaces"}),", as for ",(0,t.jsx)(n.a,{href:"#synchronous-processing",children:"synchronous"})," the caller usually waits for the response in order to process it. Thus, Auto restart feature only respects ",(0,t.jsx)(n.a,{href:"#asynchronous-processing",children:"asynchronous messages"}),"."]})}),"\n",(0,t.jsx)(n.h4,{id:"workflow-integration",children:"Workflow Integration"}),"\n",(0,t.jsx)(n.p,{children:"The concept for Workflow Integration is just the same as for Auto Restart Groups."}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Create a workflow definition and implement the workflow, transaction ",(0,t.jsx)(n.code,{children:"/C09/CONFLOW_C"}),". Please note that currently, only UBC.flow workflows are supported! See ",(0,t.jsx)(n.a,{href:"https://conflow-help.com",children:"here"})," for detailled and generic product documentation. As this is highly customer specific we cannot provide an out-of-the-box implementation. Please see below for an example as a quick start."]}),"\n",(0,t.jsxs)(n.li,{children:["Link the newly created workflow to the interface:",(0,t.jsx)(n.br,{}),"\n","Starting with Transaction ",(0,t.jsx)(n.code,{children:"/UBC/IO_CFL_C"}),", create a Workflow Group."]}),"\n",(0,t.jsxs)(n.li,{children:["In the view cluster, wwich to ",(0,t.jsx)(n.code,{children:"mapping groups <> messages"})," assign ",(0,t.jsx)(n.strong,{children:"T100"})," Message-Id and -Number combination and a target Workflow-Definition-Id to be started.\nFor every matching message in a message run, the target Workflow will be started.\n",(0,t.jsx)(n.img,{alt:"mapping groups messages example",src:i(3995).A+"",width:"835",height:"338"})]}),"\n"]}),"\n",(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsxs)(n.p,{children:["The workflows will be triggered only if the message is not auto restartable anymore, meaning the max. Retries were reached or auto restart was not configured.",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.strong,{children:"Example use case:"}),' Alerting an erroneous message by given message, e.g. "Material is locked".',(0,t.jsx)(n.br,{}),"\n","At a first glance, triggering workflows for alerting seems complicated. But most of the time, it is highly recommended to not just trigger emails. Instead we can just easily use dialog workitems and model more complex workflows if needed. Using workflow approach we can stick to the same procedure and just change some customizing. Start easy (only with mail alerting) and refine the flow."]})}),"\n",(0,t.jsx)(n.h5,{id:"example-implementation",children:"Example implementation"}),"\n",(0,t.jsxs)(n.p,{children:["In the following, we provide an example implementation of a workflow just triggering an email. See above for linking the workflow definition to the ",(0,t.jsx)(n.strong,{children:"T100"})," message."]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Create the workflow definition in ",(0,t.jsx)(n.code,{children:"/C09/CONFLOW_C"})]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Go to ",(0,t.jsx)(n.strong,{children:"Approval steps"}),", and create all possible workflow steps."]}),"\n",(0,t.jsx)(n.admonition,{type:"tip",children:(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"X0"}),", ",(0,t.jsx)(n.strong,{children:"X1"})," and ",(0,t.jsx)(n.strong,{children:"X2"})," are predefined ones and shall always be created."]})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Workflow Approval Steps",src:i(2604).A+"",width:"1863",height:"306"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Go to ",(0,t.jsx)(n.strong,{children:"User Status Definition"})," and create user status for involved user groups. Best practice is, to have at least ",(0,t.jsx)(n.strong,{children:"Initiator"})," and ",(0,t.jsx)(n.strong,{children:"Background"}),".\n",(0,t.jsx)(n.img,{alt:"Workflow User Status Definition",src:i(8517).A+"",width:"769",height:"317"})]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Go to ",(0,t.jsx)(n.strong,{children:"User Status Assignment"})," and assign users to your user groups. Depending on wether you would like to transport the entries, choose the right entry in the view cluster."]}),"\n",(0,t.jsx)(n.admonition,{type:"warning",children:(0,t.jsxs)(n.p,{children:["Make sure to use the one OR the other. Entries in both are ",(0,t.jsx)(n.strong,{children:"not supported"}),"."]})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Workflow User Status Assignment",src:i(921).A+"",width:"1153",height:"379"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Define the actual flow by switching to ",(0,t.jsx)(n.strong,{children:"Approval status - control"}),". Always start with ",(0,t.jsx)(n.strong,{children:"X0"})," and end with ",(0,t.jsx)(n.strong,{children:"X1"})," or ",(0,t.jsx)(n.strong,{children:"X2"}),".",(0,t.jsx)(n.br,{}),"\n","Here, the one and only background step does not have any action assigned and results always in ",(0,t.jsx)(n.strong,{children:"OK"}),". The workflow then ends directly after sending the mail.\n",(0,t.jsx)(n.img,{alt:"Workflow Approval status - control",src:i(9744).A+"",width:"1502",height:"346"})]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Optionally define mail settings by switching to ",(0,t.jsx)(n.strong,{children:"Control mail setting"}),". You are free to configure mail hooks by reaching certain results of the step.\n",(0,t.jsx)(n.img,{alt:"Workflow Control mail setting",src:i(1477).A+"",width:"1347",height:"341"}),"\nHere is an example of the resulting mail:\n",(0,t.jsx)(n.img,{alt:"Mail example",src:i(8075).A+"",width:"887",height:"381"}),"\nA few notes:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["The HTML template ",(0,t.jsx)(n.code,{children:"/UBC/S17_MAIL_TEMPLATE"})," was used and is delivered with every UBC installation. You are free to use your own HTML mail template. Just upload a new one in transaction ",(0,t.jsx)(n.code,{children:"SMW0"}),", you may copy from the existing template."]}),"\n",(0,t.jsxs)(n.li,{children:["The Subject and Text Text-Ids are maintained and translated in transaction ",(0,t.jsx)(n.code,{children:"SO10"}),". Make use of variables.","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Subject ",(0,t.jsx)(n.code,{children:"ZUBC_DEMO_SUBJECT_113"}),"\n",(0,t.jsx)(n.img,{alt:"ZUBC_DEMO_SUBJECT_113",src:i(6420).A+"",width:"1272",height:"203"})]}),"\n",(0,t.jsxs)(n.li,{children:["Text ",(0,t.jsx)(n.code,{children:"ZUBC_DEMO_ERROR_113"}),"\n",(0,t.jsx)(n.img,{alt:"ZUBC_DEMO_ERROR_113",src:i(1071).A+"",width:"1267",height:"474"})]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Now create a implementation for your workflow by creating a BADI and filtering (!) to your definition.\n",(0,t.jsx)(n.img,{alt:"BADI implementation",src:i(6365).A+"",width:"1369",height:"365"})]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Please find the example ABAP implementation below."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-abap",children:"class zubc_cl_cfl_badi_113 definition\n  public\n  create public.\n\n  public section.\n    interfaces if_badi_interface.\n    interfaces /c09/cfl_if_badi_0101.\n  protected section.\n    methods get_io_attributes\n      importing\n        iv_instid type /c09/cfl_s01-instid\n      exporting\n        ev_msg_id type /c09/cio_msgguid\n        ev_ifname type /c09/cio_ifname.\n    methods get_io_message\n      importing\n        iv_instid        type /c09/cfl_s01-instid\n      returning\n        value(ro_result) type ref to /c09/cl_cio_msg.\n  private section.\nendclass.\n\n\nclass zubc_cl_cfl_badi_113 implementation.\n  method /c09/cfl_if_badi_0101~execute_default_method.\n    \" jump to I/O when clicking on linked object\n    get_io_attributes( exporting iv_instid = /c09/cfl_cl_workflow_0101=>ms_instances-instance->ms_data-instid\n                      importing ev_msg_id = data(lv_msg_id)\n                                ev_ifname = data(lv_ifname) ).\n    call function '/C09/CIO_START'\n      exporting\n        p_skip_se16n = abap_true\n        irt_ifname   = value /c09/if_cio=>trt_ifname( ( sign = 'I' option = 'EQ' low = lv_ifname ) )\n        irt_msgguid  = value /c09/if_cio=>trt_msgguid( ( sign = 'I' option = 'EQ' low = lv_msg_id ) ).\n  endmethod.\n\n  method /c09/cfl_if_badi_0101~get_add_attachments.\n    \" add link to I/O as Attachment to mail\n    get_io_attributes( exporting iv_instid = is_data-instid\n                      importing ev_msg_id = data(lv_msg_id)\n                                ev_ifname = data(lv_ifname) ).\n    try.\n        insert lines of /ubc/cl_tools=>get_instance( )->get_gui_transaction_shortcut(\n            iv_name_base   = 'Shortcut'\n            iv_transaction = /ubc/if_constants=>mc_cio-transaction_single-tcode\n            it_parameter   = value #(\n                ( name = /ubc/if_constants=>mc_cio-transaction_single-parameters-message_id value = lv_msg_id )\n                ( name = /ubc/if_constants=>mc_cio-transaction_single-parameters-interface_name value = lv_ifname ) ) )\n              into table ct_attachment.\n      catch /ubc/cx_core.\n    endtry.\n  endmethod.\n\n  method /c09/cfl_if_badi_0101~get_datasource_mail.\n    try.\n        data(lo_msg) = get_io_message( is_data-instid ).\n        if lo_msg is not bound.\n          return.\n        endif.\n\n        \" for usage in SO10 text variables, e.g. &/C09/CIO_IDX_ADMIN_EXTERNAL-NAME&\n        /c09/cfl_cl_helper_0101=>add_datasource_mail( exporting is_datastruc         = lo_msg->mr_admin->_external\n                                                      changing  ct_application_input = ct_application_input ).\n\n        data(lo_tools) = /ubc/cl_tools=>get_instance( ).\n\n        \" set messages, link with SO10 main text\n        data(lt_message) = lo_tools->convert_messages_bal_2_bapiret( lo_msg->get_bal_messages( ) ).\n        insert value #(\n            tdname = 'LOG_MESSAGES'\n            tlines = lo_tools->convert_text_to_tlines_flat( lo_tools->build_html_table_for_bapiret2( lt_message ) ) )\n              into table ct_so10_text ##NO_TEXT.\n\n        \" add webgui link, link with SO10 main text\n        data(lv_link) = lo_tools->get_gui_transaction_link(\n            iv_transaction = /ubc/if_constants=>mc_cio-transaction_single-tcode\n            it_parameter   = value #(\n                ( name = /ubc/if_constants=>mc_cio-transaction_single-parameters-message_id value = lo_msg->mr_key->msgguid )\n                ( name = /ubc/if_constants=>mc_cio-transaction_single-parameters-interface_name value = lo_msg->mr_admin->name ) ) ).\n        insert value #( tdname = 'WEBGUI_LINK'\n                        tlines = lo_tools->convert_text_to_tlines_flat( lv_link ) )\n              into table ct_so10_text ##NO_TEXT.\n      catch /ubc/cx_core.\n    endtry.\n  endmethod.\n\n  method /c09/cfl_if_badi_0101~get_description.\n    data(lo_message) = get_io_message( is_data-instid ).\n    if lo_message is not bound.\n      return.\n    endif.\n    replace first occurrence of '&MSG&' in cv_description with |{ lo_message->mr_admin->msgnumber alpha = out }|.\n    replace first occurrence of '&IF&' in cv_description with lo_message->mr_admin->name.\n  endmethod.\n\n  method /c09/cfl_if_badi_0101~get_object_info.\n    cv_return = 'I/O message'(001).\n  endmethod.\n\n  method get_io_attributes.\n    /c09/cl_cio_cfl=>get_instance( )->get_attributes_for_instid( exporting iv_instid = iv_instid\n                                                                importing ev_msg_id = ev_msg_id\n                                                                          ev_ifname = ev_ifname ).\n  endmethod.\n\n  method get_io_message.\n    get_io_attributes( exporting iv_instid = iv_instid\n                      importing ev_msg_id = data(lv_msg_id)\n                                ev_ifname = data(lv_ifname) ).\n    check lv_msg_id is not initial.\n    ro_result = /c09/cl_cio_msg=>get_instance( iv_msgguid = lv_msg_id\n                                              iv_ifname  = lv_ifname ).\n  endmethod.\nendclass.\n"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"implementation",children:"Implementation"}),"\n",(0,t.jsxs)(n.admonition,{type:"warning",children:[(0,t.jsx)(n.p,{children:"Please make sure to apply the following:"}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:'have your implementation without technical errors "no shortdumps"'}),"\n",(0,t.jsx)(n.li,{children:'return meaningful errors from your interfaces ("ET_RETURN") and avoid statements like "MESSAGE TYPE \'E\'"'}),"\n"]}),(0,t.jsx)(n.p,{children:"Otherwise, it will break the persistence rules and result in inconsistencies like"}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"missing Run"}),"\n",(0,t.jsx)(n.li,{children:'Status "Pending" instead of Status "Error"\nWhich are not critical from a transactional point of view, but from a error handling perspective it is not what a User would expect.'}),"\n"]})]}),"\n",(0,t.jsx)(n.h4,{id:"triggering-interfaces-top-level-function-module-only",children:"Triggering Interfaces (Top Level Function Module only)"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["the ",(0,t.jsx)(n.a,{href:"#assign-technical-interfaces-to-ubcio-interface",children:"Customizing"})," was done for your top level function module",(0,t.jsx)(n.br,{}),"\n","If Multiple Steps are used, you are free to define the relation by customizing."]}),"\n",(0,t.jsxs)(n.li,{children:["your top level function module has to be called just like any other function module in your coding. Make sure to have at least a ",(0,t.jsx)(n.code,{children:"COMMIT WORK"})," at the end of your program in order to trigger the interface persistence."]}),"\n",(0,t.jsxs)(n.li,{children:["make sure to include ",(0,t.jsx)(n.code,{children:"/UBC/IO_MACROS"})," in your function group/module."]}),"\n",(0,t.jsxs)(n.li,{children:["First statement in function module has to be ",(0,t.jsx)(n.code,{children:"_ubc_io_begin ''."}),"\n",(0,t.jsx)(n.admonition,{type:"warning",children:(0,t.jsx)(n.p,{children:"the function module exits immediately, if not called by the framework and is asynchronous. The Exporting Parameters remains empty!"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Last statement in function module has to be ",(0,t.jsx)(n.code,{children:"_ubc_io_end ''."}),"\nThe logging will be completed automatically by the framework."]}),"\n",(0,t.jsxs)(n.li,{children:["make sure to have ",(0,t.jsx)(n.strong,{children:"no explicit commits"})," within your function module, as this will be controlled by the framework: Automatic commit if it was successfully and rollback if not.\nAt least make sure to not have ",(0,t.jsx)(n.code,{children:"COMMIT WORK"})," destroying auto restartability. If it is technically needed (for e.g. posting multiple Goods-Movements, consider using ",(0,t.jsx)(n.a,{href:"#multi-step-interfaces",children:"Multi Step Approach"}),")"]}),"\n"]}),"\n",(0,t.jsx)(n.admonition,{type:"tip",children:(0,t.jsx)(n.p,{children:"The rest of your function module can remain untouched!"})}),"\n",(0,t.jsx)(n.h4,{id:"multi-step-interfaces",children:"Multi Step Interfaces"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["The Top Level Function Module, given in ",(0,t.jsx)(n.a,{href:"#assign-technical-interfaces-to-ubcio-interface",children:"Assign technical interfaces to UBC.io interface"})," has to match the previously described contract, see ",(0,t.jsx)(n.a,{href:"#triggering-interfaces",children:"Triggering Interfaces"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:['Every "Step Function Module" ',(0,t.jsx)(n.strong,{children:"must not"})," include any macro again. It is controlled by the top level function module (begin and end) and just contains business logic!"]}),"\n",(0,t.jsx)(n.li,{children:'The Top Level Function Module can (optionally) have initialization routines between the macros "begin" and "end"'}),"\n",(0,t.jsxs)(n.li,{children:["Make sure that your Step Function Module also does not contain any ",(0,t.jsx)(n.code,{children:"COMMIT WORK"})," or ",(0,t.jsx)(n.code,{children:"ROLLBACK WORK"}),". This would destroy auto-restartability!"]}),"\n",(0,t.jsxs)(n.li,{children:["Your Step Function Module has to have ",(0,t.jsx)(n.strong,{children:"absolutely the same"})," function module signature as your top level function module.\nIf you need to exchange information between steps, consider using a optional changing parameter (add to all your involved function modules)\nThe parameters will be handed over to the next function"]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"templates",children:"Templates"}),"\n",(0,t.jsxs)(n.p,{children:["To speed up development there are ABAP templates for the use of single functions and the use of functions with multiple steps/LUWs.\nPlease have a look at the package ",(0,t.jsx)(n.code,{children:"/UBC/IO_TEMPLATE"}),"."]}),"\n",(0,t.jsx)(n.h4,{id:"business-add-ins-badis",children:"Business Add-Ins (BADIs)"}),"\n",(0,t.jsxs)(n.p,{children:["There is one enhancement spot called ",(0,t.jsx)(n.code,{children:"/C09/ES_CIO"}),", containing:"]}),"\n",(0,t.jsxs)(n.h5,{id:"interface-determination-with-c09badi_cio_func",children:["Interface determination with ",(0,t.jsx)(n.code,{children:"/C09/BADI_CIO_FUNC"})]}),"\n",(0,t.jsxs)(n.p,{children:["Basically an assignment of Top Level Function Module to an Interface has to be unique. If this is not possible (used in multiple scenarios), this BADI has to be implemented.\nThe target interface will be determined by the message payload in method ",(0,t.jsx)(n.code,{children:"/C09/IF_BADI_CIO_FUNC->DETERMINE_INTERFACE( )"}),"."]}),"\n",(0,t.jsxs)(n.h5,{id:"add-dynamic-selection-fields-with-c09badi_cio_data",children:["Add dynamic selection fields with ",(0,t.jsx)(n.code,{children:"/C09/BADI_CIO_DATA"})]}),"\n",(0,t.jsxs)(n.p,{children:["The BADI implementation can add specific logic to an Interface by implementing the interface ",(0,t.jsx)(n.code,{children:"/C09/IF_BADI_CIO_DATA"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"system-setup",children:"System setup"}),"\n",(0,t.jsxs)(n.p,{children:["Technical setup is part of UBC system setup, so please execute the setup task list first with transaction ",(0,t.jsx)(n.code,{children:"/UBC/SETUP_BASIC"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"bgrfc-configuration",children:"bgRFC configuration"}),"\n",(0,t.jsx)(n.p,{children:"In order to setup bgRFC processing, follow these steps:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://help.sap.com/saphelp_em92/helpdata/en/48/9bfc541786062de10000000a42189d/frameset.htm",children:"Create supervisor destination"})," - optional, not needed if bgRFC already setup for your system"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:'The next steps depends on wether you want to use multiple bgRFC destinations for your interfaces or just use "one destination" for all of your UBC.io interfaces. Here you will find the steps needed to create a bgRFC destination + scheduler.'}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://help.sap.com/saphelp_em92/helpdata/en/48/973e3755493987e10000000a421937/frameset.htm",children:"Create inbound destination"}),"\nThe convention is that your name starts in your namespace (Z/Y).\nHere is an example of how to create the destination ZUBCIO_INBOUND:",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.img,{alt:"Inbound destination",src:i(5021).A+"",width:"540",height:"508"}),(0,t.jsx)(n.br,{}),"\n","A few notes:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["The server group (see transaction ",(0,t.jsx)(n.code,{children:"RZ12"}),") should be not initial. Consider using at least standard ",(0,t.jsx)(n.code,{children:"parallel_generators"}),'.\nBy not specifying a server group the bgRFC uses all qualified servers in an SAP System according to automatic resource-allocation rules. However, by defining server groups, you can control which servers can be used for paralle -processing. An RFC group specifies the set of allowed servers as well as a mechanism to not overload, e.g. "use only 75% of max. allowed dialog processes".']}),"\n",(0,t.jsxs)(n.li,{children:["Prefixes\nA new prefix is needed for every queue in your UBC.io customizing. Without queue prefix no queued processing!\nSo for example, your queue starts with the literals ",(0,t.jsx)(n.code,{children:"MATERIAL_"}),", then you have to enter this prefix so that bgRFC queueing works correctly."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://help.sap.com/saphelp_em92/helpdata/en/48/98139e0e0e0e27e10000000a421937/frameset.htm",children:"Create inbound scheduler"}),(0,t.jsx)(n.br,{}),"\n","Best practice: create the scheduler settings for your newly created destination.",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.img,{alt:"Inbound destination scheduler",src:i(1124).A+"",width:"570",height:"446"}),(0,t.jsx)(n.br,{}),"\n",'You can play around mit the maximum possible parallelization by changing "Open Connections".']}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"auto-restart-job",children:"Auto restart Job"}),"\n",(0,t.jsxs)(n.p,{children:["If you decide to configure Auto Restart, a Job needs to be scheduled to trigger Auto Restart after configured deadlines.\nIn order to do so, schedule a Job for Report ",(0,t.jsx)(n.code,{children:"/C09/CIO_AUTORESTART"})," in a period of ",(0,t.jsx)(n.code,{children:"1 Minute"}),". The auto restart of a single message does not get triggered as long as the minimum wait time was not reached."]}),"\n",(0,t.jsx)(n.h2,{id:"authorization",children:"Authorization"}),"\n",(0,t.jsxs)(n.p,{children:["The authorization object ",(0,t.jsx)(n.code,{children:"/UBC/IO_IF"})," is used for restricting the usage of UBC.io interface monitors (Main Monitor ",(0,t.jsx)(n.code,{children:"/UBC/IO"})," and Queue Monitor ",(0,t.jsx)(n.code,{children:"/UBC/IO_QUEUE"}),"). As UBC.io is organized by interfaces, the authorization object is also designed for restricting activites of specific interfaces.\nThe following authorization fields are provided:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"/UBC/IO_NM"}),": interface name to restrict for, as chosen in UBC.io customizing (see ",(0,t.jsx)(n.code,{children:"/UBC/IO_C"}),")"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"ACTVT"}),": allowed activity/activites\nPossible values are:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"03 (Display)"}),(0,t.jsx)(n.br,{}),"\n","Restricts the display of messages.\nIf no display activity is maintained for a specific interface, the message will not be shown in the I/O monitors."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"91 (Reactivate)"}),(0,t.jsx)(n.br,{}),"\n","Restricts the availability of operation ",(0,t.jsx)(n.code,{children:"Restart"})," in I/O monitors."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"04 (Print, edit messages)"}),(0,t.jsx)(n.br,{}),"\n","Restricts the availability of operation ",(0,t.jsx)(n.code,{children:"Edit"})," in I/O monitors."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"90 (Copy)"}),(0,t.jsx)(n.br,{}),"\n","Restricts the availability of operation ",(0,t.jsx)(n.code,{children:"Copy"})," in I/O monitors."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"31 (Confirm)"}),(0,t.jsx)(n.br,{}),"\n","Restricts the availability of operation ",(0,t.jsx)(n.code,{children:"Acknowledge"})," in I/O monitors."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"02 (Change)"}),(0,t.jsx)(n.br,{}),"\n","This activity acts as a collective one which includes all the changing operations from above:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Restart"}),"\n",(0,t.jsx)(n.li,{children:"Edit"}),"\n",(0,t.jsx)(n.li,{children:"Copy"}),"\n",(0,t.jsxs)(n.li,{children:["Acknowledge","\n",(0,t.jsx)(n.admonition,{type:"tip",children:(0,t.jsx)(n.p,{children:"We recommend to use the dedicated activites mentioned above."})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"data-archiving",children:"Data Archiving"}),"\n",(0,t.jsxs)(n.p,{children:["UBC.io comes with a dedicated Archiving Object ",(0,t.jsx)(n.code,{children:"/C09/CIO"}),", used to archive all the data which was persisted to monitor and process the messages.\nAs in most SAP standard applications the archive runs are scheduled within transaction ",(0,t.jsx)(n.code,{children:"SARA"}),".\nThe write step offers multiple options to select the messages. Please note that only messages will be archived which are in a completed state. Only own persistency:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"index table entries"}),"\n",(0,t.jsxs)(n.li,{children:["workflows in a completed step started by workflow integration, see ",(0,t.jsx)(n.a,{href:"#workflow-integration",children:"Workflow Integration"})]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"will be archived."}),"\n",(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsxs)(n.p,{children:["the write step does not trigger data archiving of a connected business object or IDOC.\nIf needed, data archiving can also be included in customer archiving routines, calling methods of ",(0,t.jsx)(n.code,{children:"/C09/IF_CIO_ARC_MSG_SERVICE"}),"."]})})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8075:(e,n,i)=>{i.d(n,{A:()=>s});const s=i.p+"assets/images/image_022-d90d8d1a72c5b57115e56cb268a5a13c.png"},8517:(e,n,i)=>{i.d(n,{A:()=>s});const s=i.p+"assets/images/image_019-717d372c48f3dd3349fa0c70784527fc.png"},9199:(e,n,i)=>{i.d(n,{A:()=>s});const s=i.p+"assets/images/image_013-c6f97100c65ed9446306ef8f98d5f844.png"},9744:(e,n,i)=>{i.d(n,{A:()=>s});const s=i.p+"assets/images/image_021-fc3c05a76472fab455064cf6cc38d087.png"}}]);