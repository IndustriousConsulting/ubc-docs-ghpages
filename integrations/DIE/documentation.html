<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-integrations/DIE/documentation" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.0">
<title data-rh="true">BTP Document Information Extraction | UBC - cross system workflows</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://ubc.services/integrations/DIE/documentation"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="BTP Document Information Extraction | UBC - cross system workflows"><meta data-rh="true" name="description" content="Intro"><meta data-rh="true" property="og:description" content="Intro"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://ubc.services/integrations/DIE/documentation"><link data-rh="true" rel="alternate" href="https://ubc.services/integrations/DIE/documentation" hreflang="en"><link data-rh="true" rel="alternate" href="https://ubc.services/integrations/DIE/documentation" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.939e2f28.css">
<script src="/assets/js/runtime~main.77abd734.js" defer="defer"></script>
<script src="/assets/js/main.ff978be8.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" target="_self" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="UBC" class="themedComponent_mlkZ themedComponent--light_NVdE" height="32"><img src="/img/logo.png" alt="UBC" class="themedComponent_mlkZ themedComponent--dark_xIcU" height="32"></div><b class="navbar__title text--truncate">cross system workflows</b></a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" target="_self" href="/"><img src="/img/logo.png" alt="UBC" class="themedComponent_mlkZ themedComponent--light_NVdE" height="32"><img src="/img/logo.png" alt="UBC" class="themedComponent_mlkZ themedComponent--dark_xIcU" height="32"><b>cross system workflows</b></a><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/IO/documentation">I/O monitoring (UBC.io)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/REST/documentation">RESTful webservices (UBC.rest)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/BO/documentation">UBC Business objects (UBC.bo)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/IDOC/documentation">IDOC integration (UBC.idoc)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/FLOW/documentation">Workflows (UBC.flow)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/JSON/documentation">JSON integration (UBC.json)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/MQTT/documentation">MQTT integration (UBC.mqtt)</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/integrations/S1SEVEN/documentation">out-of-the-box Integrations</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/integrations/S1SEVEN/documentation">S1SEVEN</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/integrations/UnibrightONE/documentation">Unibright.ONE</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/integrations/DIE/documentation">BTP Document Information Extraction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/integrations/O365Mail/documentation">Microsoft Mail</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/integrations/ADLSG2/documentation">Azure Data Lake Storage Gen2</a></li></ul></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">out-of-the-box Integrations</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">BTP Document Information Extraction</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>BTP Document Information Extraction</h1>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="intro">Intro<a href="#intro" class="hash-link" aria-label="Direct link to Intro" title="Direct link to Intro">​</a></h2>
<p>The following documentation describes the implementation of the Document Information Extraction service into the UBC landscape. Document Information Extraction is a OCR (Optical Character Recognition) service of SAPs BTP (Business Technology Platform) enviroment, used to extract machine readable data from different document formats. UBC now provides all the functionalities neccesary to develop a custom process and workflow all the way from a human readable document up to a fully functioning business process.</p>
<!-- -->
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="document-information-extraction-service"><a href="https://help.sap.com/docs/DOCUMENT_INFORMATION_EXTRACTION?locale=en-US" target="_blank" rel="noopener noreferrer">Document Information Extraction Service</a><a href="#document-information-extraction-service" class="hash-link" aria-label="Direct link to document-information-extraction-service" title="Direct link to document-information-extraction-service">​</a></h2>
<p>The Document Information Extraction service is an OCR cloud service that can extract text data from an unstructured document. This data can be queried in a machine-readable format to be used for further processing. The service supports multiple file formats, however we recommend using &quot;.pdf&quot; format. The service comes by default equipped with the ability to process a few standard document types, these are: invoices, purchase orders, payment advice and business cards. In case we choose to process custom document types, a few initial customizing steps are neccesary. The objects to be customized and created will be described in the sections below.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="schema"><a href="https://help.sap.com/docs/DOCUMENT_INFORMATION_EXTRACTION/5fa7265b9ff64d73bac7cec61ee55ae6/020ab638cfa84eb08caa26f5dbf3b8ef.html?locale=en-US" target="_blank" rel="noopener noreferrer">Schema</a><a href="#schema" class="hash-link" aria-label="Direct link to schema" title="Direct link to schema">​</a></h3>
<p>A schema is a collection of potential extraction fields. This can be understood simply as empty variables that are to be filled by the extraction service. We need to define a name and type of the variables. There are only a few possible variable types, number, string, date currency and discount. More important however are the names of these variables, these are used when quering the extracted data as a key-value pair. For this we would recommend using the same name as the target fields in postprocessing, however custom mappings can also be implemented. As standard, header fields are used for data that appears only once per document, line items are to be used for tables.</p>
<p>To create a schema, go to the home page of your Document Information Extraction instance, click the settings icon on the lower left side of the screen and click on the &quot;Schema Configuration&quot; option. Here you will have the opportunity to create and maintain schemas.</p>
<p><img loading="lazy" alt="Schema" src="/assets/images/Schema_UBC-1057521230649de97f1d55c258988785.png" width="2158" height="1612" class="img_ev3q"></p>
<p>As for the naming convention of the schemas we would recommend to use the classic conventions of the customer. The naming convention of the schema fields should be clear and understandable. The best way is to use SAP standard descriptions or some meaningful substitute (for example purchase order number could be &quot;ebeln&quot; , &quot;po_num&quot; ).</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="template"><a href="https://help.sap.com/docs/DOCUMENT_INFORMATION_EXTRACTION/5fa7265b9ff64d73bac7cec61ee55ae6/d044566e8a6646e58a9459079cc30178.html?locale=en-US" target="_blank" rel="noopener noreferrer">Template</a><a href="#template" class="hash-link" aria-label="Direct link to template" title="Direct link to template">​</a></h3>
<p>A template is the next object that needs to be configured. First an already active schema needs to be assigned to a template, so make sure there is already one created and activated. We would suggest defining one schema per process. The reason for this proposal is the automatic template detection functionality of the service, which can automatically assign the correct template to the document based on its layout and schema. So, if we have five different pdf document layouts from which we always extract the same information just from different positions, we only supply the schema, and the service assigns the correct template automatically. Once a schema is assigned, a template can be understood as a map for the extraction service to be able to find the data and fill our extraction fields (based on the assigned schema) for our specific document layout. For custom document layouts the creation of templates is necessary.
A template also needs an example document to be uploaded with the same layout as the future documents to be processed. On this uploaded example we can then annotate the positions of data to be extracted, each header field and line items of a table. We have to try to be as precise with the annotations as possible. Also keep in mind to choose the best sample document/documents for a template, in some cases we experienced issues if the annotated text was significantly shorter than the later in the processed documents. We must keep in mind that this is needed for custom document types only, and our results will be affected by the quality of the document layout, for example if the lines of the table are close to each other, not separated by lines can result in worse extraction results. Similarly, the image quality of the document is a factor affecting the extraction results quality if we are to use picture formats.</p>
<p>To create a template<sup><a href="#user-content-fn-1" id="user-content-fnref-1" data-footnote-ref="true" aria-describedby="footnote-label">1</a></sup>, go to the home screen of your instance of the extraction service and click the second button on the left pane called &quot;Template&quot;. Here you will have the opportunity to create maintain templates. After the uploaded example document gets processed, you can annotate the data into the schema fields. To annotate press the &quot;Annotate&quot; button and then press &quot;Edit&quot; on the upper right pane. Use your mouse to select the text data.</p>
<p><img loading="lazy" alt="Template" src="/assets/images/Template-ddee6e35c8b9c6fdeb860108a507ae38.png" width="3386" height="1416" class="img_ev3q"></p>
<p><img loading="lazy" alt="Template2" src="/assets/images/Template_mark_results-bb6f34cfbb9c7679e9c7ef9236641c24.png" width="2434" height="1652" class="img_ev3q"></p>
<p><img loading="lazy" alt="Template3" src="/assets/images/Add_to_template-40a2ec1c6efb6107e928c0d08af91e88.png" width="3246" height="1746" class="img_ev3q"></p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="extraction">Extraction<a href="#extraction" class="hash-link" aria-label="Direct link to Extraction" title="Direct link to Extraction">​</a></h3>
<p>After we are finished with the needed customizing of our schemas and templates, we are ready to process documents. Each document uploaded will be processed using a schema and a template, these are chosen during the upload of the document for extraction. As mentioned earlier with correct customizing setup we can use the auto detect functionality to assign the template automatically. We can upload a document manually, using the user interface of the extraction service, or programmatically using the services application interface. To upload a document manually go to the home screen of the extraction service and click the &quot;+&quot; button on the upper right pane. After that fill out the required data, document type and schema. You can also assign a template, but it can also be detected automatically with the &quot;detect automatically&quot; option. As the next step we choose a file and press the &quot;Step2&quot; button that will show you the extraction header fields from the schema. Continue by pressing &quot;Step3&quot; that will show you the extraction line item fields from the schema. After that press &quot;Review&quot; and &quot;Confirm&quot; to finish the process. The document will show up on the home screen and will have the status &quot;Pending&quot;. After the status changes to &quot;Ready&quot; you can examine the results. Click on the table entry to open the document and press &quot;Extraction Results&quot; button on the upper right pane. Here you can inspect the result and correct them by pressing the &quot;Edit&quot; button. After editing you will have the opportunity to confirm your changes, that also means the document will be locked and it is expected that all the extracted data is 100% correct. You will also have the option to provide your file to SAP for the chance to be included in the training of the extraction AI (this does not mean it will be included in the training data). Each extraction result field displayed also shows the &quot;Confidence&quot; of the result, which means &quot;how good&quot; the extraction is from the AI point of view. Naturally results with low confidence can have correct values and vice versa, however this is not the rule.</p>
<p><img loading="lazy" alt="Extraction" src="/assets/images/Extractio_upload-c2c7949b07b4548179c20085d2576ae7.png" width="2116" height="1756" class="img_ev3q"></p>
<p><img loading="lazy" alt="Extraction" src="/assets/images/Extraction-b8569becbf8bceaaad03cda9d8a446c2.png" width="3196" height="1418" class="img_ev3q"></p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ubc">UBC<a href="#ubc" class="hash-link" aria-label="Direct link to UBC" title="Direct link to UBC">​</a></h2>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="setup">Setup<a href="#setup" class="hash-link" aria-label="Direct link to Setup" title="Direct link to Setup">​</a></h3>
<p>The setup you have to prepare will be dependent on your concrete implementation and usage of different UBC building blocks. However our main focus here should remain the setup of the DIE connection. Here we will need certain data from the service key of the Document Information Extraction, this could be provided by your IT support team. Please use the mapping exapmle below to map the correct fields into the report that will set up the connection customizing automatically. The report can be found under <code>/UBC/DIE_TASK_CONFIG_PROXY</code> or execute the DIE part of the <code>/UBC/DIE_MAIL_SETUP</code> task list. In more complicated usecases we can provide a task list tailored to your needs.</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;url&quot;: &quot;{ENDPOINT}&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;html5-apps-repo&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;app_host_id&quot;: &quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;uaa&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;tenantmode&quot;: &quot;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;sburl&quot;: &quot;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;subaccountid&quot;: &quot;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;credential-type&quot;: &quot;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;clientid&quot;: &quot;{CLIENT_ID}&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;xsappname&quot;: &quot;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;clientsecret&quot;: &quot;{CLIENT_SECRET}&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;url&quot;: &quot;{IDENTITY_ENDPOINT}&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;uaadomain&quot;: &quot;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;verificationkey&quot;: &quot;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;apiurl&quot;: &quot;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;identityzone&quot;: &quot;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;identityzoneid&quot;: &quot;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;tenantid&quot;: &quot;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;zoneid&quot;: &quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;swagger&quot;: &quot;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;saasregistryenabled&quot;: &quot;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;endpoints&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;backend&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;url&quot;: &quot;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;timeout&quot;: &quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;sap.cloud. service&quot;: &quot;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;tenantuiur]&quot;: &quot;{UI URL}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img loading="lazy" alt="Report" src="/assets/images/Proxy-ae7d19c4c46c9c8b458aa739d3d28492.png" width="3420" height="1258" class="img_ev3q"></p>
<p>With this completed you are ready to use the DIE functionalities with one of the standard solutions, or to develop your own solution using the <code>/UBC/CL_DIE_PROXY</code> class as you starting point.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="pre-extraction-processing">Pre extraction processing<a href="#pre-extraction-processing" class="hash-link" aria-label="Direct link to Pre extraction processing" title="Direct link to Pre extraction processing">​</a></h3>
<p>Pre extraction processing is everything that happens before the extraction service is called. Here we stay completaly flexible with our UBC.REST, UBC.MQTT and UBC.FLOW implementations, to get and prepare the documents for extraction. For a more concrete example of how a pre extraction process could look like you could refer to the <a href="#31-pre-extraction-processing">QEASY</a> implementation.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="post-extraction-processing">Post extraction processing<a href="#post-extraction-processing" class="hash-link" aria-label="Direct link to Post extraction processing" title="Direct link to Post extraction processing">​</a></h3>
<p>Post extraction processing is everything that happens after the extraction of unstructured data from the document is received. As the first step a validity check will be executed over the extraction result checking for the minimum acceptable confidence of the results. This value will be set as part of business object setup supporting your process logic. If at least one of the extraction fields is to be of smaller confidence, then the required minimum the processing will stop with an error message and a manual correction, or confirmation will be needed from the assigned users. After the corrections, the processing may continue.</p>
<p><img loading="lazy" alt="Confidence" src="/assets/images/Confidence_error-bea5f4830636c55cf4fe2777620d0837.png" width="1418" height="254" class="img_ev3q"></p>
<p>Here custom implementations can be injected into the process, that will determine what should be done with the results. UBC provides standard implementation for certain usecases for example mapping into <code>QALITY02</code> IDoc structure. The logic to be executed can be defined in a post processing class, that will be linked to the extraction with a schema id and a template id. This way the process dynamically determines what logic is to be used for the current document. The assignement of the implementing class is to be maintained using the maintenance view <code>/UBC/DIE_PR_LK_V</code> or accessed from <code>/n/UBC_CUSTOMIZING</code> by the <code>Link Template to Implementation</code> shortcut.</p>
<p>To implement a post processing class it needs to interface <code>/UBC/IF_DIE_POST_PROCESSING</code> or inherit from one of the standard UBC implementations of it. With the redefinition/implementation of the method <code>/UBC/IF_DIE_POST_PROCESSING~process_result</code> the custom processing logic will be called.</p>
<p>If a manual correction is needed in the extraction results, the document button can be used for each message in the IO monitor. This opens the browser and takes the user directly to the concrete document, where the results can be manually changed and saved. On user save all of the fields will have confidence of 1 meaning 100% because they were edited by a user thus should be correct. After the changes are saved the message can be restarted in the IO monitor, this will result in fetching the extraction results again (with the updated values) and continue the processing with the next step.</p>
<p><img loading="lazy" alt="DIE_JUMP" src="/assets/images/DIE_jump-b587dcebcf6bb5a98f6067512f351285.png" width="2134" height="434" class="img_ev3q"></p>
<p>We have two more button options available for each message. These can be used to quickly access other objects or screens to be able to monitor your process in an efficient way.</p>
<p><img loading="lazy" alt="EMAIL_JUMP" src="/assets/images/Email_jump-a7caa08feff52a38e05a0621cd1eeac4.png" width="2058" height="438" class="img_ev3q"></p>
<p><img loading="lazy" alt="QEASY_JUMP" src="/assets/images/Lfcer_jump-898ae1eecd85d4637854a6e9afd266a9.png" width="2060" height="424" class="img_ev3q"></p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="qeasy-implementation">QEASY implementation<a href="#qeasy-implementation" class="hash-link" aria-label="Direct link to QEASY implementation" title="Direct link to QEASY implementation">​</a></h2>
<p>The following segment describes the process and components used by the QEASY implementation with <a href="/">UBC</a>. This implementation takes place in three different system landscapes. The entire process starts with an inbound process, in our case this is an email received in a designated inbox with an attachment containing the certificate.
The emails are periodically read out of the inbox, marked as read and moved to a &quot;processed&quot; folder.
After the initial pre-processing of the data, it is sent to the SAP Business Technology Platform where an instance of the Document Information Extraction service is running. The service extracts the text data from the unstructured document and the results are queried by UBC for further processing. After the extracted data is received by UBC a validity check happens that checks the quality of the extracted data. In case the confidence on an extraction is low a responsible person will be notified to correct and confirm the data manually for the processing to continue. The last step is the post extraction processing, which is customer specific logic to be executed with the extracted data. In our case the extracted data will be mapped to an IDoc of type <code>QALITY02</code>, that will be used as an input for &quot;QEASY&quot; for automatic test lot creation. An overview of the IDoc data and the posted data will be visualized also in the &quot;QEASY Cockpit&quot; (transaction: <code>/n/QEASY/LFCER</code>). The use of this implementation is promising the automatization of multiple manual tasks as well as a first step toward the use of artificial intelligence and cloud tools in practice.</p>
<p><img loading="lazy" alt="Process" src="/assets/images/Proces-093e8230438c61371751421408b9b437.png" width="2480" height="1246" class="img_ev3q"></p>
<p><img loading="lazy" alt="Flow" src="/assets/images/Flow_chart-6329f30894a7058bfa7a44753a6547b0.png" width="1356" height="849" class="img_ev3q"></p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="pre-extraction-processing-1">Pre extraction processing<a href="#pre-extraction-processing-1" class="hash-link" aria-label="Direct link to Pre extraction processing" title="Direct link to Pre extraction processing">​</a></h3>
<p>For this usecase the standard UBC implementation of <a href="/integrations/O365Mail/documentation">Microsoft Mail</a> is used. The first step of the process is reading emails from an inbox and getting the attachment of the email. Attached should be only one attachment at the time, because we will start one workflow per email. The attachment should be of format pdf. The emails to be processed must be in unread state, that differentiates the ones to be processed. After the workflow starts for the email and its attachment the status is changed to read and is moved to a different folder in the mailbox.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="extraction-1">Extraction<a href="#extraction-1" class="hash-link" aria-label="Direct link to Extraction" title="Direct link to Extraction">​</a></h3>
<p>The result should be mapped into an IDoc structure of type &quot;QALITY02&quot; and for that we will always need to extract certain fields from the certificate regardless of the type or layout. These fields can make their way into a schema belonging to this process. The fields are the following:</p>
<table><thead><tr><th style="text-align:center">Header Fields</th><th style="text-align:center">Suggested Field Name</th><th style="text-align:center">Type</th></tr></thead><tbody><tr><td style="text-align:center">Order number</td><td style="text-align:center">PO_Num</td><td style="text-align:center">string</td></tr><tr><td style="text-align:center">Item number</td><td style="text-align:center">PO_Item_Num</td><td style="text-align:center">string</td></tr><tr><td style="text-align:center">Material number</td><td style="text-align:center">Material</td><td style="text-align:center">string</td></tr></tbody></table>
<table><thead><tr><th style="text-align:center">Line Item Fields</th><th style="text-align:center">Suggested Field Name</th><th style="text-align:center">Type</th></tr></thead><tbody><tr><td style="text-align:center">Name of the characteristic</td><td style="text-align:center">Characteristic_Name</td><td style="text-align:center">string</td></tr><tr><td style="text-align:center">Value of the characteristic</td><td style="text-align:center">Value</td><td style="text-align:center">string</td></tr><tr><td style="text-align:center">Unit of measurement</td><td style="text-align:center">UOM</td><td style="text-align:center">string</td></tr></tbody></table>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="post-extraction-processing-1">Post extraction processing<a href="#post-extraction-processing-1" class="hash-link" aria-label="Direct link to Post extraction processing" title="Direct link to Post extraction processing">​</a></h3>
<p>As the last step the IDoc will be used to trigger QEASY for inspection lot creation with integrated validity checks as standard.
This mapping is handled by a post processing ABAP class that dictates how should the extraction results be mapped into the IDoc. A class can be assigned to a template that way we have the flexibility of creating different mappings for different documents, for example one class could create multiple IDocs from one document, while others just one, or custom logic could be defined to look up additional data not found in the document but is needed for the processes further down the line.</p>
<p>The two buttons in the IO monitor in this case are already pre configured. The first &#x27;Message&#x27; takes the user into the mailbox and directly to the mail that is being processed. The second one &#x27;SAP Object&#x27; takes the user to the QEASY cockpit where the created IDoc/IDocs and the inspection lot creation can be monitored.</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="idoc-creation">IDoc creation<a href="#idoc-creation" class="hash-link" aria-label="Direct link to IDoc creation" title="Direct link to IDoc creation">​</a></h4>
<p>The QEASY implementation by default provides a default post processing class<code>/UBC/CL_DIE_POST_PROC_CERT_STD</code>, that creates a single IDoc from the extraction results. It expects all of the mandatory fields to be found in the extraction results (under the same structure and names as in the suggested naming convention), and performs no checks over the created IDoc. If a decision is made that a different naming convention is to be used, or a document provides the data in different format, a new class can be created that needs to interface <code>/UBC/IF_DIE_POST_PROCESSING</code> or inheriting from <code>/ubc/cl_die_post_proc</code> Here the method <code>process_result</code> needs to be implemented that should create IDocs and return the required parameters. If we want to reuse some of the existing functionalities, then the new class could inherit <code>/UBC/CL_DIE_POST_PROC_CERT_STD</code> and redefine the some of the methods. For example method <code>set_data</code> could be redefined for a completely new logic for IDoc mapping from results, or methods like <code>get_material_num</code> could be redefined to keep existing mapping logic just change certain parts like variable name of extracted fields or some additional logic with the extracted data.
If the class is completed it can be assigned to a schema and optionally also a template, linking one or multiple schema/template ids to an implementing class. The links are stored in the table <code>/UBC/DIE_PR_LINK</code> and entries can be maintained using the maintenance view <code>/UBC/DIE_PR_LK_V</code> or accessed from <code>/n/UBC_CUSTOMIZING</code> by the <code>Link Template to Implementation</code> shortcut. During the post processing the used template and schema is checked from the received extraction results and based on that an implementation is fetched.</p>
<p><img loading="lazy" alt="Template link Customizing" src="/assets/images/Template_implementation_link_v-2c72f155baa1ade2b0693913137d9fc4.png" width="2484" height="846" class="img_ev3q">
<img loading="lazy" alt="Template link Entries" src="/assets/images/Template_implementation_link-a55b57c6bec759e3c576a74d4cc2c367.png" width="976" height="902" class="img_ev3q"></p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="idoc-mapping">IDoc mapping<a href="#idoc-mapping" class="hash-link" aria-label="Direct link to IDoc mapping" title="Direct link to IDoc mapping">​</a></h4>
<p>The IDoc structure in the postprocessing steps will be filled with the following data. The data in the IDoc will be a mixture of system variables, data queried from the email and our extraction results.</p>
<table><thead><tr><th style="text-align:center">Segment type</th><th style="text-align:center">Element</th><th style="text-align:center">Value</th></tr></thead><tbody><tr><td style="text-align:center">E1EDK03</td><td style="text-align:center">IDDAT</td><td style="text-align:center">constant</td></tr><tr><td style="text-align:center">E1EDK03</td><td style="text-align:center">DATUM</td><td style="text-align:center">Email receive date</td></tr><tr><td style="text-align:center">E1EDK03</td><td style="text-align:center">UZEIT</td><td style="text-align:center">Email receive time</td></tr><tr><td style="text-align:center">E1EDK02</td><td style="text-align:center">QUALF</td><td style="text-align:center">constant</td></tr><tr><td style="text-align:center">E1EDK02</td><td style="text-align:center">BELNR</td><td style="text-align:center">PO number (from extr.)</td></tr><tr><td style="text-align:center">E1EDK02</td><td style="text-align:center">DATUM</td><td style="text-align:center">Current date</td></tr><tr><td style="text-align:center">E1EDK02</td><td style="text-align:center">UZEIT</td><td style="text-align:center">Current time</td></tr><tr><td style="text-align:center">E1EDP19</td><td style="text-align:center">QUALF</td><td style="text-align:center">constant</td></tr><tr><td style="text-align:center">E1EDP19</td><td style="text-align:center">IDTNR</td><td style="text-align:center">Material number from PO<sup><a href="#user-content-fn-2" id="user-content-fnref-2" data-footnote-ref="true" aria-describedby="footnote-label">2</a></sup></td></tr><tr><td style="text-align:center">E1EDP02</td><td style="text-align:center">QUALF</td><td style="text-align:center">constant</td></tr><tr><td style="text-align:center">E1EDP02</td><td style="text-align:center">BELNR</td><td style="text-align:center">PO number (from extr.)</td></tr><tr><td style="text-align:center">E1EDP02</td><td style="text-align:center">ZEILE</td><td style="text-align:center">PO item number (from extr.)</td></tr><tr><td style="text-align:center">E1EDP02</td><td style="text-align:center">DATUM</td><td style="text-align:center">Current datum</td></tr><tr><td style="text-align:center">E1EDP02</td><td style="text-align:center">UZEIT</td><td style="text-align:center">Current time</td></tr><tr><td style="text-align:center">E1EDP03</td><td style="text-align:center">IDDAT</td><td style="text-align:center">constant</td></tr><tr><td style="text-align:center">E1EDP03</td><td style="text-align:center">DATUM</td><td style="text-align:center">Email receive date</td></tr><tr><td style="text-align:center">E1EDP03</td><td style="text-align:center">UZEIT</td><td style="text-align:center">Email receive time</td></tr><tr><td style="text-align:center">E1CCI01</td><td style="text-align:center">CHARACTERISTIC_NAME</td><td style="text-align:center">Characteristic name per char.<sup><a href="#user-content-fn-3" id="user-content-fnref-3" data-footnote-ref="true" aria-describedby="footnote-label">3</a></sup> (from extr.)</td></tr><tr><td style="text-align:center">E1MEA01</td><td style="text-align:center">INSPECTION_DATA_TYPE</td><td style="text-align:center">constant</td></tr><tr><td style="text-align:center">E1MEA01</td><td style="text-align:center">VALUE</td><td style="text-align:center">Characteristic value per char.<sup><a href="#user-content-fn-4" id="user-content-fnref-4" data-footnote-ref="true" aria-describedby="footnote-label">4</a></sup> (from extr.)</td></tr><tr><td style="text-align:center">E1MEA01</td><td style="text-align:center">INSPECTED_QUANTITY</td><td style="text-align:center">constant</td></tr><tr><td style="text-align:center">E1MEA01</td><td style="text-align:center">NUMBER_OF_SAMPLES</td><td style="text-align:center">constant</td></tr></tbody></table>
<section data-footnotes="true" class="footnotes"><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5 sr-only" id="footnote-label">Footnotes<a href="#footnote-label" class="hash-link" aria-label="Direct link to Footnotes" title="Direct link to Footnotes">​</a></h2>
<ol>
<li id="user-content-fn-1">
<p>In the current version of DIE the template creation process was changed. To assign a document to the template we need to first post the document for extraction manually, assign the schema to it and process it with an empty template. After the processing is done, we need to annotate the data like before and then click on the &#x27;Add to Template&#x27; button to add it. The document will be linked to the selected template that we can activate and use. <a href="#user-content-fnref-1" data-footnote-backref="" aria-label="Back to reference 1" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-2">
<p>in the base class conversion <code>CONVERSION_EXIT_MATN1_INPUT</code> is used on the extracted value to be correctly processed by QEASY <a href="#user-content-fnref-2" data-footnote-backref="" aria-label="Back to reference 2" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-3">
<p>in the base class conversion to <strong>all upper case</strong> is used on the extracted value to be correctly processed by QEASY <a href="#user-content-fnref-3" data-footnote-backref="" aria-label="Back to reference 3" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-4">
<p>in the base class we replace <strong>decimal point</strong> with <strong>comma</strong> in the extracted values to be correctly processed by QEASY <a href="#user-content-fnref-4" data-footnote-backref="" aria-label="Back to reference 4" class="data-footnote-backref">↩</a></p>
</li>
</ol>
</section></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/integrations/UnibrightONE/documentation"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Unibright.ONE</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/integrations/O365Mail/documentation"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Microsoft Mail</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#intro" class="table-of-contents__link toc-highlight">Intro</a></li><li><a href="#document-information-extraction-service" class="table-of-contents__link toc-highlight">Document Information Extraction Service</a><ul><li><a href="#schema" class="table-of-contents__link toc-highlight">Schema</a></li><li><a href="#template" class="table-of-contents__link toc-highlight">Template</a></li><li><a href="#extraction" class="table-of-contents__link toc-highlight">Extraction</a></li></ul></li><li><a href="#ubc" class="table-of-contents__link toc-highlight">UBC</a><ul><li><a href="#setup" class="table-of-contents__link toc-highlight">Setup</a></li><li><a href="#pre-extraction-processing" class="table-of-contents__link toc-highlight">Pre extraction processing</a></li><li><a href="#post-extraction-processing" class="table-of-contents__link toc-highlight">Post extraction processing</a></li></ul></li><li><a href="#qeasy-implementation" class="table-of-contents__link toc-highlight">QEASY implementation</a><ul><li><a href="#pre-extraction-processing-1" class="table-of-contents__link toc-highlight">Pre extraction processing</a></li><li><a href="#extraction-1" class="table-of-contents__link toc-highlight">Extraction</a></li><li><a href="#post-extraction-processing-1" class="table-of-contents__link toc-highlight">Post extraction processing</a><ul><li><a href="#idoc-creation" class="table-of-contents__link toc-highlight">IDoc creation</a></li><li><a href="#idoc-mapping" class="table-of-contents__link toc-highlight">IDoc mapping</a></li></ul></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__links text--center"><div class="footer__links"><a href="https://www.icxp.eu/impressum" target="_blank" rel="noopener noreferrer" class="footer__link-item">Impressum</a></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://www.icxp.eu" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="/img/logo_subline.png" alt="Industrious Consulting Experience GmbH" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo_subline.png" alt="Industrious Consulting Experience GmbH" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU"></a></div><div class="footer__copyright">Copyright © 2023 Industrious Consulting Experience GmbH</div></div></div></footer></div>
</body>
</html>